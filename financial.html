<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="format-detection" content="telephone=no,address=no,email=no">
		<meta name="applicable-device" content="pc,mobile">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<meta http-equiv="Cache-Control" content="no-transform">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="renderer" content="webkit">
		<meta name="description" content="领先的国际货运智能化数字服务平台，拥有极速订舱、在线报关、航班跟踪、舱单生成四大功能，为国际货运企业提供灵活、专业、高效的一站式国际货运解决方案。">
		<meta name="keywords" content="空运,货运代理,航空货运,空运价格,国际货代,国际空运,订舱,空运货物查询跟踪,订舱报价,空运舱位,空运费查询,跨境物流,走空运找哪里">
		<link rel='icon' href='./img/favicon.ico' type='image/x-icon' />
		<title>17订舱-国际货代-空运价格-在线订舱-航线-一站式国际货运在线服务平台</title>
		<link rel="stylesheet" href="./css/element-ui-min.css">
		<link rel="stylesheet" href="./css/reset.css" />
		<link rel="stylesheet" href="./css/common.css" />
		<script src="./js/vue.js"></script>
		<script src="./js/axios.min.js"></script>
		<script src="./js/element-ui.js"></script>
		<script>
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "https://hm.baidu.com/hm.js?6557743b6903181767d9b1a4d7458530";
				var s = document.getElementsByTagName("script")[0]; 
				s.parentNode.insertBefore(hm, s);
			})();
		</script>
	</head>
	<body>
		<div id="app" style="font-size: 0;">
			<!-- 头部 -->
			<div class="header">
				<div class="header-img">
					<a href="./index.html">
						<!-- <img class="logo" src="./img/logo.png" /> -->
						<div class="logo"></div>
					</a>
					<div class="logo-title"></div>
				</div>
				<div v-if="userInfo" class="header-userInfo">
					<img @mousemove="showHeaderMenu(1)" class="header-imgUrl" :src="userInfo.headImgUrl" />
					<div v-show="headerMenu" @mousemove="showHeaderMenu(1)" @mouseout="showHeaderMenu(2)" style="display: none;" class="header-userInfo-menu">
						<div class="header-userInfo-menu-name">{{userInfo.nickname}}</div>
						<div class="header-bak"><a href="./corporate.html">企业认证</a></div>
						<div class="header-bak"><a href="./orderList.html">订单管理</a></div>
						<div class="header-bak"><a href="./financial.html">财务管理</a></div>
						<div @click="tuiChu" class="header-bak">退出</div>
					</div>
				</div>
				<div v-else @click="loginClick" class="header-user">登录</div>
			</div>
			<div class="header-menu">
				<ul class="header-menu-list com-width">
					<li @click="menuClick(0)" :class="{headerActive: menuIndex == 0}" class="header-menu-content">首页</li>
					<li @click="menuClick(1)" :class="{headerActive: menuIndex == 1}" class="header-menu-content">订单跟踪</li>
					<!-- <li @click="menuClick(2)" :class="{headerActive: menuIndex == 2}" class="header-menu-content">行业咨询</li> -->
					<li @click="menuClick(3)" :class="{headerActive: menuIndex == 3}" class="header-menu-content">关于我们</li>
				</ul>
			</div>
			<!-- 订单管理 -->
			<div class="order-list">
				<div class="com-width order-list-content">
					<div class="order-list-userInfo">
						<div class="list-userInfo-menu">
							<div class="userInfo-touxiang-list">
								<div class="userInfo-touxiang-img">
									<img alt="图片" :src="userInfo.headImgUrl" />
								</div>
								<div class="userInfo-huanyin">欢迎您{{userInfo.nickname}}</div>
								<div class="userInfo-youxiang">设置邮箱</div>
							</div>
							<ul class="userInfo-menu-list">
								<li><a>企业信息</a></li>
								<li><a href="./orderList.html">订单管理</a></li>
								<li class="menu-list-active"><a href="./financial.html">财务管理</a></li>
							</ul>
						</div>
						<div class="list-userInfo-customer">
							<div class="userInfo-customer"><div>您的专属客服:</div><div>nana</div></div>
							<div class="userInfo-customer"><div>欢迎致电:</div><div>13567862626</div></div>
						</div>
					</div>
					<div class="order-list-manage">
						<div class="order-list-manage-title">财务管理</div>
						<div class="order-list-from">
							<el-form :inline="true" size="medium" label-width="100px" class="demo-form-inline">
								<div class="content-search-normal">
									<el-form-item label="航班日期">
										<el-date-picker
											v-model="departureDate"
											type="daterange"
											style="width: 255px;"
											range-separator="至"
											start-placeholder="起始日期"
											value-format="yyyy-MM-dd"
											end-placeholder="结束日期">
										</el-date-picker>
									</el-form-item>
									<el-form-item>
										<el-button @click="searchClick" size="medium" type="primary" icon="el-icon-search">查询</el-button>
										<el-button @click="restClick" size="medium" type="primary">清空</el-button>
									</el-form-item>
								</div>
							</el-form>
						</div>
						<div class="tabs__nav-wrap">
							<el-tabs v-model="typeCode" type="border-card" @tab-click="tabClickData">
							    <el-tab-pane label="发票开具" name="发票开具">
									<div class="financial-invoice">
										<div class="financial-invoice-table">
											<el-table
												class="financial-table"
												:data="tableData"
												stripe
												style="width: 100%">
												<el-table-column type="selection" width="50"></el-table-column>
												<el-table-column prop="orderid" label="运单号" min-width="120"></el-table-column>
												<el-table-column prop="date" label="航班日期" min-width="100"></el-table-column>
												<el-table-column prop="zhangdan" label="对账单位" min-width="180"></el-table-column>
												<el-table-column prop="hangxian" label="航线" min-width="120"></el-table-column>
												<el-table-column prop="price" label="订单总金额" min-width="100"></el-table-column>
											</el-table>
											<div class="financial-merge">
												<div class="financial-merge-price">总金额：<span>￥8550</span></div>
												<div class="financial-merge-list">
													<div class="financial-merge-btn">合并开票</div>
													<div class="financial-merge-btn">单独开票</div>
													<div class="financial-merge-btn">DEBIT NOTE</div>
												</div>
											</div>
										</div>
										<div class="financial-invoice-bill">
											<div class="invoice-bill-item">
												<div class="invoice-bill-item-title">开票账单</div>
												<div class="invoice-bill-item-details">
													<div class="bill-order">
														<div class="bill-order-text1">
															<div>运单号：123-12345678</div>
															<div>￥100</div>
														</div>
														<div class="bill-order-text2">
															<div>ABC-DEF</div>
															<div>2021-09-10</div>
														</div>
													</div>
													<div class="bill-price">总金额：<span>￥8550</span></div>
												</div>
											</div>
											<div class="invoice-bill-item">
												<div class="invoice-bill-item-title">开票信息</div>
												<div class="invoice-bill-item-details">
													<el-form :inline="false" size="mini" label-width="60px" class="demo-form-inline">
														<div class="border-btm-solid">
															<el-form-item label="发票类型">
															    <el-select v-model="invoiceType" placeholder="请选择发票类型" clearable filterable>
															    	<el-option 
															    		v-for="(item,index) in invoiceTypeOpt" 
															    		:key="item.Name" 
																		:label="item.Name"
															    		:value="item.Value">
															    	</el-option>
															    </el-select>
															</el-form-item>
														</div>
														<div class="border-btm-solid" style="margin-top: 10px;">
															<el-form-item label="发票抬头">
															    <el-select v-model="invoiceType" placeholder="请选择发票抬头" clearable filterable>
															    	<el-option 
															    		v-for="(item,index) in invoiceTypeOpt" 
															    		:key="item.Name" 
																		:label="item.Name"
															    		:value="item.Value">
															    	</el-option>
															    </el-select>
															</el-form-item>
															<el-form-item label="纳税人识别号" class="form-label-style">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="公司地址">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="公司电话">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="开户行">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="银行账号">
															    <div>12345678901234567890</div>
															</el-form-item>
														</div>
														<div style="margin-top: 10px;">
															<el-form-item label="收件人">
															    <el-select v-model="invoiceType" placeholder="请选择收件人" clearable filterable>
															    	<el-option 
															    		v-for="(item,index) in invoiceTypeOpt" 
															    		:key="item.Name" 
																		:label="item.Name"
															    		:value="item.Value">
															    	</el-option>
															    </el-select>
															</el-form-item>
															<el-form-item label="联系电话">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="邮箱">
															    <div>12345678901234567890</div>
															</el-form-item>
															<el-form-item label="邮寄地址">
															    <div>12345678901234567890</div>
															</el-form-item>
														</div>
													</el-form>
												</div>
											</div>
										</div>
									</div>
								</el-tab-pane>
							    <el-tab-pane label="发票信息" name="发票信息">
									<div style="color: #999;font-size: 18px;font-weight: 100;margin-bottom: 20px;">发票信息</div>
									<el-table
										class="financial-table"
										:data="tableData"
										stripe
										style="width: 100%">
										<el-table-column type="selection" width="50"></el-table-column>
										<el-table-column prop="orderid" label="发票号" min-width="120"></el-table-column>
										<el-table-column prop="date" label="航班日期" min-width="120"></el-table-column>
										<el-table-column prop="zhangdan" label="最晚付款日期" min-width="180"></el-table-column>
										<el-table-column prop="hangxian" label="总金额" min-width="120"></el-table-column>
										<el-table-column prop="price" label="发票抬头" min-width="120"></el-table-column>
										<el-table-column prop="status" label="公司地址及电话" min-width="120"></el-table-column>
										<el-table-column prop="id" label="收件人" min-width="60"></el-table-column>
									</el-table>
									<div class="financial-table-price">总金额：<span>￥8550</span></div>
									<div style="color: #999;font-size: 18px;font-weight: 100;margin-bottom: 20px;margin-top: 20px;">发票详情</div>
									<el-table
										class="financial-table"
										:data="tableData"
										stripe
										style="width: 100%">
										<el-table-column prop="id" label="发票号" min-width="120"></el-table-column>
										<el-table-column prop="orderid" label="运单号" min-width="120"></el-table-column>
										<el-table-column prop="date" label="航班日期" min-width="120"></el-table-column>
										<el-table-column prop="zhangdan" label="最晚付款日期" min-width="120"></el-table-column>
										<el-table-column prop="price" label="总金额" min-width="120"></el-table-column>
									</el-table>
								</el-tab-pane>
							    <el-tab-pane label="财务核销" name="财务核销">
									<el-table
										class="financial-table"
									    :data="tableData"
									    stripe
									    style="width: 100%">
									    <el-table-column prop="id" label="序号" min-width="50"></el-table-column>
									    <el-table-column prop="orderid" label="运单号" min-width="120"></el-table-column>
									    <el-table-column prop="date" label="航班日期" min-width="120"></el-table-column>
										<el-table-column prop="zhangdan" label="对账单位" min-width="180"></el-table-column>
										<el-table-column prop="hangxian" label="航线" min-width="120"></el-table-column>
										<el-table-column prop="price" label="订单总金额" min-width="120"></el-table-column>
										<el-table-column prop="status" label="核销状态" min-width="120"></el-table-column>
									</el-table>
									<div class="financial-table-price">总金额：<span>￥8550</span></div>
								</el-tab-pane>
							</el-tabs>
						</div>
					</div>
				</div>
			</div>
			
			<!-- 尾部 -->
			<div class="footer">
				<div class="com-width">
					<div class="footer-content">
						<div class="footer-label">
							<div class="footer-cool" style="margin-bottom: 10px;">
								<span>Copyright © 2020-2021 17dc.com  丨  沪ICP备2021024815号-1  丨  <a target="_blank" href="./yingyezhizhaoImg.html" class="yingyezhizhao">营业执照</a></span>
							</div>
							<!-- <div class="footer-cool" style="margin-bottom: 10px;display: flex;align-items: center;justify-content: center;">
								<img src="./img/footer-wangjing.png" style="width: 16px;height: 16px;margin-right: 10px;" />
								<span>沪公网备XXXXXXXXXXXXX号</span>
							</div> -->
							<div class="footer-ipc">上海傲晔物流科技有限公司  丨  上海市青浦诸光路1588弄虹桥世界中心L3B栋</div>
						</div>
						<div class="footer-img"><img alt="图片" src="./img/qcode.png" /></div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="./service/index.js"></script>
	<script>
		new Vue({
			el: '#app',
			data: {
				loading: false,
				menuIndex: 0,
				userInfo: {},
				openId: '',
				headerMenu: false,
				pageNum: 1,
				pageSize: 10,
				departureDate: '',
				typeCode: '发票开具',
				total: 0,
				dataArr: [],
				invoiceType: '',
				invoiceTypeOpt: [
					{
						Name: '增值税电子普通发票',
						Value: '1'
					},
					{
						Name: '增值税普通发票',
						Value: '2'
					},
					{
						Name: '增值税专用发票',
						Value: '3'
					}
				],
				tableData: [
					{
						id: '1',
						orderid: '123-12345678',
						date: '2021-09-10',
						zhangdan: '苏州乐尚代理有限公司',
						hangxian: 'ABC - DFE',
						price: '￥100',
						status: '部分核销'
					}, {
						id: '2',
						orderid: '123-12345678',
						date: '2021-09-10',
						zhangdan: '苏州乐尚代理有限公司',
						hangxian: 'ABC - DFE',
						price: '￥100',
						status: '部分核销'
					}, {
						id: '3',
						orderid: '123-12345678',
						date: '2021-09-10',
						zhangdan: '苏州乐尚代理有限公司',
						hangxian: 'ABC - DFE',
						price: '￥100',
						status: '部分核销'
					}, {
						id: '4',
						orderid: '123-12345678',
						date: '2021-09-10',
						zhangdan: '苏州乐尚代理有限公司',
						hangxian: 'ABC - DFE',
						price: '￥100',
						status: '部分核销'
					}
				]
			},
			created() {
				if(!localStorage.getItem('wxOpenId')){
					window.location.href = './login.html'
				}
				if(localStorage.getItem('userInfo')){
					this.userInfo = JSON.parse(localStorage.getItem('userInfo'))
				}
				this.openId = localStorage.getItem('wxOpenId')
				this.initUserInfo()
				this.initData()
			},
			methods: {
				tabClickData() {
					this.initData()
				},
				initData() {
					var json = {
						departureDate1: this.departureDate == '' ? '' : this.departureDate[0],
						departureDate2: this.departureDate == '' ? '' : this.departureDate[1],
						pageNum: this.pageNum,
						pageSize: this.pageSize
					}
					json = toData(json)
					axios({
						method: 'get',
						url: webIp+serviceApi.orderSearchByPage+'?'+json,
						headers: {
							'tokenId': localStorage.getItem('tokenId')
						}
					}).then((data) =>{
						var data = data.data
						if(data.code == 200){
							if(data.data.records == null){
								this.dataArr = []
								this.total = 0
							}else{
								this.dataArr = data.data.records
								this.total = data.data.total
							}
						}else if(data.code == -200){
							window.location.href = './login.html'
						}else{
							this.$message.error(data.message)
						}
					})
				},
				initUserInfo(){
					axios({
						method: 'get',
						url: webIp+serviceApi.userUserInfo+'?openId='+this.openId,
						headers: {
							'tokenId': localStorage.getItem('tokenId')
						}
					}).then((data) =>{
						var data = data.data
						if(data.code == 200){
							this.userInfo = data.data.tportalUser
						}else if(data.code == -200){
							window.location.href = './login.html'
						}else{
							this.$message.error(data.message)
						}
					})
				},
				searchClick() {
					this.initData()
				},
				restClick() {
					this.departureDate = ''
					this.pageNum = 1
					this.pageSize  = 10
					this.initData()
				},
				handleCurrentChange(val) {
					this.pageNum = val
					this.initData()
				},
				showHeaderMenu(type) {
					if(type == 1){
						this.headerMenu = true
					} else {
						this.headerMenu = false
					}
				},
				tuiChu() {
					localStorage.clear()
					window.location.href = './login.html'
				},
				//登录
				loginClick() {
					window.location.href = './login.html'
				},
				// muen
				menuClick(index) {
					this.menuIndex = index
					if(index == 0){
						window.location.href = './index.html'
					}else if(index == 3){
						window.location.href = './about_us.html'
					}
				}
			}
		})
	</script>
</html>
